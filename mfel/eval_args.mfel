### this program grabs all command line args and evaluates them.
### it passes the resulting array to f
### 
### if you call the program with these araguments:
###  executable_name "function(x,y){x*y}(5)" 3 1+1 2+2 "@array(2,1)" "()" "3<1" "[1,2,3,4]"
### it will output:
###  [15,[2,4,[1,1],(),false,[1,2,3,4]]]
###

@include("mfel/stdlib.mfel");

let f := staticfn (args) {
    if @len(args) < 2 {
        @error("need at least 2 args, got ",@len(args))
    } else {
        let f := args(0);
        let x := args(1);
        let args := @slice(args,2,@len(args));
        [f(x),args]
    }
};
f(let eval = staticfn(str) {@eval(str)} in amap(eval,@env))

